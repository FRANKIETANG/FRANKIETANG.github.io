---
title: 响应式怎么搞
date: 2018-02-12 00:19:30
tags:
- CSS
categories:
- CSS
description: 一套 CSS 全平台适用，外包公司都爱它。
---

# 响应式怎么搞

手机 PC 用同一套 CSS，类似于 Bootstrap 这种 UI 框架一样。（ Build responsive, mobile-first projects on the web. ）专注移动端。

[示例代码](https://github.com/FRANKIETANG/Understanding-CSS/tree/master/example/mobile)

## 媒体查询

媒体查询始终离不开 `@media` 这个东西，是用来判断当前窗口是什么情况的。

比如像下面这个例子，屏幕宽度小于 800px 变红色。

```html
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <style>
    @media (max-width: 800px) {
      body {
        background: red;
      }
    }
  </style>
</head>

<body>

</body>

</html>
```

![](https://i.loli.net/2018/02/07/5a7ad4e6dba9a.gif)

好了，响应式就那么多内容。下面做复杂点。

```html
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <style>
    @media (max-width: 320px) {
      body {
        background: red;
      }
    }

    @media (min-width: 321px) and (max-width: 375px) {
      body {
        background: orange;
      }
    }

    @media (min-width: 376px) and (max-width: 425px) {
      body {
        background: green;
      }
    }

    @media (min-width: 426px) and (max-width: 768px) {
      body {
        background: blue;
      }
    }

    @media (min-width: 769px) {
      body {
        background: purple;
      }
    }
  </style>
</head>

<body>

</body>

</html>
```

![](https://i.loli.net/2018/02/07/5a7aece6bb87a.gif)

关于媒体查询有几点是值得注意的：

可以利用 `<link>` 标签的 media 来决定是否引用 CSS 。

```html
<link rel="stylesheet" href="style.css" media="(max-width: 320px)">
```

## 没图不做

前端一定要拿到图才能写页面，要不然很难写的。

接下来举一个响应式页面的例子。

https://www.smashingmagazine.com/

手机和电脑的页面菜单栏不一样，电脑的菜单栏是长条的，手机的菜单栏是一个按钮。

![](https://i.loli.net/2018/02/07/5a7af2dbb90db.png)

![](https://i.loli.net/2018/02/07/5a7af2dbc593d.png)

试着简单实现一下这个导航栏的例子。

先做手机端和 PC 端都可以，看心情。但是会有 Mobile first 或者 Desktop first 这个概念，比如 Bootstrap 这个就是 Mobile first -> 先设计手机端。

```html
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <style>
    * {
      margin: 0;
      padding: 0;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    ol,
    ul {
      list-style: none;
    }

    .logo {
      width: 60px;
      height: 60px;
      background: grey;
      border-radius: 30px;
    }

    .clearfix::after {
      content: '';
      display: block;
      clear: both;
    }

    header {
      padding: 10px;
      position: relative;
    }

    .mobile-nav {
      display: none;
      background: gray;
      margin-top: 10px;
    }

    .mobile-nav.active {
      display: flex;
      justify-content: space-between;
    }

    header button {
      position: absolute;
      right: 20px;
      top: 30px;
    }

    .desktop-nav {
      display: none;
    }

    @media (min-width: 451px) {
      header button {
        display: none;
      }
      .mobile-nav,
      .mobile-nav.active {
        display: none;
      }
      .desktop-nav {
        display: block;
      }
      header {
        display: flex;
        align-items: center;
      }
      header .desktop-nav {
        display: flex;
        margin-left: 20px;
      }
      header .desktop-nav li {
        margin: 0 20px;
      }
    }
  </style>
</head>

<body>
  <header>
    <div class="logo"></div>
    <button id="xx">菜单</button>
    <ul id="yy" class="mobile-nav">
      <li>
        <a href="#">导航1</a>
      </li>
      <li>
        <a href="#">导航2</a>
      </li>
      <li>
        <a href="#">导航3</a>
      </li>
      <li>
        <a href="#">导航4</a>
      </li>
      <li>
        <a href="#">导航5</a>
      </li>
    </ul>

    <ul class="desktop-nav">
      <li>
        <a href="#">导航1</a>
      </li>
      <li>
        <a href="#">导航2</a>
      </li>
      <li>
        <a href="#">导航3</a>
      </li>
      <li>
        <a href="#">导航4</a>
      </li>
      <li>
        <a href="#">导航5</a>
      </li>
    </ul>
  </header>
  <script>
    xx.onclick = function () {
      yy.classList.toggle('active')
    }
  </script>
</body>

</html>
```

这样就做出来了一个比较简单的响应式。

![](https://i.loli.net/2018/02/08/5a7be3a14d404.gif)

当然现在大部分的网页都是通过后端来判断 UserAgent 来加载页面，你看淘宝就是一个例子。（`taobao.com` 和 `m.taobao.com`）

这种两套 HTML 是比较常见的，因为如果是做响应式的话，HTML 的代码会非常多，所以拆成两个页面写两套代码会比较好。当然也会和工作方面有关，因为很有可能做手机端和做 PC 端是两个部门，各做各的。

而且善用 `display: block;` 也很重要。可以看看大部分的响应式都是利用 `display: block;` 来实现的，例如这个博客。

## meta viewport

```html
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
```

这一句是必须要加的，是禁止缩放的意思，不允许手机伪装成 980px 缩放页面。

可以试试不加这一句话然后在 console 试试 `document.documentElement.clientWidth` 看看宽度是多少。

`meta:vp` 可以直接生成。

## 移动端的特点

Flex 布局用得比较多。

交互方式也不一样。

- 没有 hover

  ![](https://i.loli.net/2018/02/08/5a7c568f8ceeb.gif)

- 有 touch 事件（不能监听 click 事件）

- 没有 resize（不能放大和缩小）

- 没有滚动条